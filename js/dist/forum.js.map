{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@sycho/flarum-uikit/webpack/bootstrap","webpack://@sycho/flarum-uikit/webpack/runtime/compat get default export","webpack://@sycho/flarum-uikit/webpack/runtime/define property getters","webpack://@sycho/flarum-uikit/webpack/runtime/hasOwnProperty shorthand","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'forum/components/Search')\"","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@sycho/flarum-uikit/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@sycho/flarum-uikit/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@sycho/flarum-uikit/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@sycho/flarum-uikit/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/helpers/highlight')\"","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@sycho/flarum-uikit/./src/forum/components/DiscussionSearchSource.tsx","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/components/Input')\"","webpack://@sycho/flarum-uikit/./src/forum/components/DiscussionSearch.tsx","webpack://@sycho/flarum-uikit/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@sycho/flarum-uikit/./src/common/components/ProgressBar.js","webpack://@sycho/flarum-uikit/./src/common/components/Label.js","webpack://@sycho/flarum-uikit/./src/common/components/LabelGroup.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/Search');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/highlight');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport highlight from 'flarum/common/helpers/highlight';\nimport Button from 'flarum/common/components/Button';\nexport default class DiscussionSearchSource {\n  constructor(onSelect, ignore) {\n    _defineProperty(this, \"results\", new Map());\n    _defineProperty(this, \"onSelect\", void 0);\n    _defineProperty(this, \"ignore\", void 0);\n    this.results = new Map();\n    this.onSelect = onSelect;\n    this.ignore = ignore;\n  }\n  search(query) {\n    query = query.toLowerCase();\n    this.results.set(query, []);\n    const params = {\n      filter: {\n        q: query\n      },\n      page: {\n        limit: 3\n      }\n    };\n    const id = Number(query);\n    if (!Number.isNaN(id) && id !== Number(this.ignore)) {\n      return app.store.find('discussions', String(id)).then(d => {\n        this.results.set(query, [d]);\n      });\n    }\n    return app.store.find('discussions', params).then(results => {\n      this.results.set(query, results.filter(d => d.id() !== this.ignore));\n    });\n  }\n  view(query) {\n    query = query.toLowerCase();\n    return (this.results.get(query) || []).map(discussion => {\n      return m(\"li\", {\n        className: \"DiscussionSearchResult\",\n        \"data-index\": 'discussions' + discussion.id()\n      }, m(Button, {\n        onclick: () => this.onSelect(discussion)\n      }, m(\"div\", {\n        className: \"DiscussionSearchResult-id\"\n      }, discussion.id()), m(\"div\", {\n        className: \"DiscussionSearchResult-title\"\n      }, highlight(discussion.title(), query))));\n    });\n  }\n}\nflarum.reg.add('sycho-uikit', 'forum/components/DiscussionSearchSource', DiscussionSearchSource);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Input');","import app from 'flarum/forum/app';\nimport Search from 'flarum/forum/components/Search';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport DiscussionSearchSource from './DiscussionSearchSource';\nimport extractText from 'flarum/common/utils/extractText';\nimport classList from 'flarum/common/utils/classList';\nimport Input from 'flarum/common/components/Input';\nexport default class DiscussionSearch extends Search {\n  view() {\n    const currentSearch = this.searchState.getInitialSearch();\n\n    // Initialize search sources in the view rather than the constructor so\n    // that we have access to app.forum.\n    if (!this.sources) this.sources = this.sourceItems().toArray();\n\n    // Hide the search view if no sources were loaded\n    if (!this.sources.length) return m(\"div\", null);\n    const searchLabel = extractText(app.translator.trans('core.forum.header.search_placeholder'));\n    const isActive = !!currentSearch;\n    const shouldShowResults = !!(this.searchState.getValue() && this.hasFocus);\n    const shouldShowClearButton = !!(!this.loadingSources && this.searchState.getValue());\n    return m(\"div\", {\n      role: \"search\",\n      \"aria-label\": app.translator.trans('core.forum.header.search_role_label'),\n      className: classList('Search', 'UiKit-Search', {\n        open: this.searchState.getValue() && this.hasFocus,\n        focused: this.hasFocus,\n        active: isActive,\n        loading: !!this.loadingSources\n      })\n    }, m(Input, {\n      \"aria-label\": searchLabel,\n      className: \"Search-input\",\n      type: \"search\",\n      placeholder: searchLabel,\n      value: this.searchState.getValue(),\n      onchange: value => this.searchState.setValue(value),\n      clearable: shouldShowClearButton,\n      loading: this.loadingSources,\n      inputAttrs: {\n        onfocus: () => this.hasFocus = true,\n        onblur: () => this.hasFocus = false\n      }\n    }), m(\"ul\", {\n      className: \"Dropdown-menu Search-results\",\n      \"aria-hidden\": !shouldShowResults || undefined,\n      \"aria-live\": shouldShowResults ? 'polite' : undefined\n    }, shouldShowResults && this.sources.map(source => source.view(this.searchState.getValue()))));\n  }\n  sourceItems() {\n    const items = new ItemList();\n    items.add('discussions', new DiscussionSearchSource(discussion => {\n      this.searchState.setValue(discussion.title());\n      this.attrs.onSelect(discussion);\n    }, this.attrs.ignore));\n    return items;\n  }\n}\nflarum.reg.add('sycho-uikit', 'forum/components/DiscussionSearch', DiscussionSearch);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","import Component from 'flarum/common/Component';\nexport default class ProgressBar extends Component {\n  view() {\n    let className = ['UiKit-ProgressBar'];\n    if (this.attrs.className) className.push(this.attrs.className);\n    if (this.attrs.mini) className.push('UiKit-ProgressBar--mini');\n    if (this.attrs.fancy) className.push('UiKit-ProgressBar--fancy');\n    if (this.attrs.alternate) className.push('UiKit-ProgressBar--alternate');\n    return m(\"div\", {\n      className: className.join(' ')\n    }, m(\"div\", {\n      className: \"UiKit-ProgressBar-bar\",\n      style: {\n        width: \"\".concat(this.getProgress(), \"%\")\n      }\n    }));\n  }\n  getProgress() {\n    return this.attrs.progress;\n  }\n}\nflarum.reg.add('sycho-uikit', 'common/components/ProgressBar', ProgressBar);","import Component from 'flarum/common/Component';\nexport default class Label extends Component {\n  view(vnode) {\n    let style = {};\n    let className = ['UiKit-Label'];\n    if (this.attrs.className) className.push(this.attrs.className);\n    if (this.attrs.color) {\n      style.backgroundColor = \"#\".concat(this.attrs.color);\n      className.push('colored');\n    }\n    return m(\"span\", {\n      className: className.join(' '),\n      style: style\n    }, m(\"span\", {\n      className: \"UiKit-Label-text\"\n    }, vnode.children));\n  }\n}\nflarum.reg.add('sycho-uikit', 'common/components/Label', Label);","import Component from 'flarum/common/Component';\nexport default class LabelGroup extends Component {\n  view(vnode) {\n    let className = ['UiKit-LabelGroup'];\n    if (this.attrs.className) className.push(this.attrs.className);\n    return m(\"span\", {\n      className: className.join(' ')\n    }, vnode.children);\n  }\n}\nflarum.reg.add('sycho-uikit', 'common/components/LabelGroup', LabelGroup);"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","_typeof","Symbol","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","value","configurable","writable","DiscussionSearchSource","onSelect","ignore","this","Map","results","search","query","toLowerCase","set","params","filter","q","page","limit","id","Number","isNaN","find","then","view","map","discussion","m","className","onclick","title","add","DiscussionSearch","currentSearch","searchState","getInitialSearch","sources","sourceItems","toArray","length","searchLabel","trans","isActive","shouldShowResults","getValue","hasFocus","shouldShowClearButton","loadingSources","role","open","focused","active","loading","type","placeholder","onchange","setValue","clearable","inputAttrs","onfocus","onblur","undefined","source","items","attrs","ProgressBar","push","mini","fancy","alternate","join","style","width","concat","getProgress","progress","Label","vnode","color","backgroundColor","children","LabelGroup"],"sourceRoot":""}